<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Navbar</title>
        <link rel="stylesheet" href="../Styles/header.css">
        <link rel="stylesheet" href="../Styles/feedback.css">
        <!-- Link to external CSS -->
    </head>
    <body>
      <!-- HEADER PAGE HTML START======================================================================= -->
        <nav class="navbar">
            <div class="logo">
                <img id="logo" src="../Assests/logo.png" alt="Defence Guru Logo">
            </div>
            <div class="menu-toggle" onclick="toggleMenu()">☰</div>
            <ul class="nav-links" id="navLinks">

                <!-- Discover Dropdown -->
                <li class="dropdown">
                    <a href="#" class="dropbtn" onclick="toggleDropdown(event)">
                        <b>Discover ▾</b>
                    </a>
                    <ul class="dropdown-content">
                        <li>
                            <a href="./home.html" onclick="closeMenu()">Home</a>
                        </li>
                        <li>
                            <!-- <a href="./placedstudentss.html" onclick="closeMenu()">Placements</a> -->
                        </li>
                        <li>
                            <a href="./career.html" onclick="closeMenu()">Career</a>
                        </li>
                        <li>
                            <a href="./gallary.html" onclick="closeMenu()">Gallery</a>
                        </li>
                        <li>
                            <a href="./feedback.html" onclick="closeMenu()">Student Corner</a>
                        </li>
                        <li>
                            <a href="./enquiry.html" onclick="closeMenu()">Courses Enquiry</a>
                        </li>
                        <li>
                            <a href="./helpsupoort.html" onclick="closeMenu()">Help and Support</a>
                        </li>
                        <li>
                            <a href="./faq.html" onclick="closeMenu()">FAQ</a>
                        </li>
                    </ul>
                </li>

          

                <li>
                    <a href="./courses.html" onclick="closeMenu()">
                        <b>Courses</b>
                    </a>
                </li>
                
                    <li>
                    <a href="./about.html" onclick="closeMenu()">
                        <b>About Us</b>
                    </a>
                </li>


                <li>
                    <a href="./contact.html" onclick="closeMenu()">
                        <b>Contact Us</b>
                    </a>
                </li>
            </ul>
        </nav>
        
<!-- HEADER HTML END======================================================================= -->



<!-- Feedback PAGE HTML START============================================================================= -->
 
    <!-- <div id="header-placeholder"></div> -->
    <!-- Testimonial Cards Section -->

    <div class="testimonial-container">
      <!-- Testimonial Card 1 -->
      <div class="header-container">
        <h1 class="student-corner">Student Corner</h1>
      </div>
     
      <div class="testimonial-card">
        <div class="quote-icon">
          <i class="fas fa-quote-right"></i>
        </div>
        <div class="profile-section">
          <div class="profile-image">
            <img src="../Assests/testiomonials1.jpg" alt="John Doe" />
          </div>
          <div class="profile-info">
            <h3 class="profile-name">Om Deshmane</h3>
            <div class="rating">
              <i class="fas fa-star filled"></i>
              <i class="fas fa-star filled"></i>
              <i class="fas fa-star filled"></i>
              <i class="fas fa-star filled"></i>
              <i class="fas fa-star"></i>
            </div>
          </div>
        </div>
        <p class="testimonial-text">
          A very good institute which teaches you from zero to high. Provide all
          facilities doubt section and placement session which helps you lot
          further, a faculty is very nice and teaches perfect which will land
          all to high in further. Best trainers who motivates and guides you all
          time
        </p>
      </div>

      <!-- Testimonial Card 2 -->
      <div class="testimonial-card">
        <div class="quote-icon">
          <i class="fas fa-quote-right"></i>
        </div>
        <div class="profile-section">
          <div class="profile-image">
            <img src="../Assests/testiomonials2.jpg.jpg" alt="Jane Smith" />
          </div>
          <div class="profile-info">
            <h3 class="profile-name">Vedanti Gajanan Shende</h3>
            <div class="rating">
              <i class="fas fa-star filled"></i>
              <i class="fas fa-star filled"></i>
              <i class="fas fa-star filled"></i>
              <i class="fas fa-star"></i>
              <i class="fas fa-star"></i>
            </div>
          </div>
        </div>
        <p class="testimonial-text">
          "This is not just the institute,this is the gateway to your successful
          and future-proof career.They're comitted to ensuring that you don't
          just finish the course, but you land a job in the field."
        </p>
      </div>

    <!-- Testimonial Card 3 -->
            <div class="testimonial-card">
                <div class="quote-icon">
                    <i class="fas fa-quote-right"></i>
                </div>
                <div class="profile-section">
                    <div class="profile-image">
                        <img src="../Course/Vaishnavi wak'.jpeg" alt="Alice Johnson">
                    </div>
                    <div class="profile-info">
                        <h3 class="profile-name">Vaishnavi Wakchaure</h3>
                        <div class="rating">
                            <i class="fas fa-star filled"></i>
                            <i class="fas fa-star filled"></i>
                            <i class="fas fa-star filled"></i>
                            <i class="fas fa-star filled"></i>
                            <i class="fas fa-star filled"></i>
                        </div>
                    </div>
                </div>
                <p class="testimonial-text">
                    Which is the best institute for learning and gaining hands-on experience in domains such as Cyber Security, Data Science, DevOps, etc.?
                </p>
            </div>
    
            <!-- Testimonial Card 4 -->
            <div class="testimonial-card">
                <div class="quote-icon">
                    <i class="fas fa-quote-right"></i>
                </div>
                <div class="profile-section">
                    <div class="profile-image">
                        <img src="../Course/vishal wabale.jpeg" alt="Ankush pawar">
                    </div>
                    <div class="profile-info">
                        <h3 class="profile-name">Vishal Gavade</h3>
                        <div class="rating">
                            <i class="fas fa-star filled"></i>
                            <i class="fas fa-star filled"></i>
                            <i class="fas fa-star filled"></i>
                            <i class="fas fa-star"></i>
                            <i class="fas fa-star"></i>
                        </div>
                    </div>
                </div>
                <p class="testimonial-text">
                    Which is the best institute for learning and gaining hands-on experience in domains such as Cyber Security, Data Science, DevOps, etc.? The instructor is very supportive, treats students like family, and genuinely cares for them, making this class truly exceptional!
                </p>
            </div>
    
            <!-- Testimonial Card 5 -->
            <div class="testimonial-card">
                <div class="quote-icon">
                    <i class="fas fa-quote-right"></i>
                </div>
                <div class="profile-section">
                    <div class="profile-image">
                        <img src="../Course/russhi wable'.jpeg" alt="Emily Davis">
                    </div>
                    <div class="profile-info">
                        <h3 class="profile-name"> Rushikesh Wabale </h3>
                        <div class="rating">
                            <i class="fas fa-star filled"></i>
                            <i class="fas fa-star filled"></i>
                            <i class="fas fa-star filled"></i>
                            <i class="fas fa-star filled"></i>
                            <i class="fas fa-star"></i>
                        </div>
                    </div>
                </div>
                <p class="testimonial-text">
                    Very satisfied with the service! Everything was handled professionally and efficiently.
                </p>
            </div>
    
            <!-- Testimonial Card 6 -->
            <div class="testimonial-card">
                <div class="quote-icon">
                    <i class="fas fa-quote-right"></i>
                </div>
                <div class="profile-section">
                    <div class="profile-image">
                        <img src="../Course/akansha ban.jpeg" alt="David Wilson">
                    </div>
                    <div class="profile-info">
                        <h3 class="profile-name">Akanksha Ban</h3>
                        <div class="rating">
                            <i class="fas fa-star filled"></i>
                            <i class="fas fa-star filled"></i>
                            <i class="fas fa-star filled"></i>
                            <i class="fas fa-star filled"></i>
                            <i class="fas fa-star filled"></i>
                        </div>
                    </div>
                </div>
                <p class="testimonial-text">
                    Outstanding experience! The team went above and beyond to meet my needs.
                </p>
            </div>

    </div>

    <!-- Testimonial Form Section -->
    <!-- Testimonial Form Section -->
    <div class="testimonial-form-container">
      <div class="testimonial-form">
        <h2 class="form-title">Share Your Experience</h2>
        <form id="testimonialForm" class="form">
          <!-- Upload Image Section -->
          <div class="form-group">
            <label class="form-label">Upload Your Photo</label>
            <div class="upload-container">
              <label class="upload-label">
                <i class="fas fa-cloud-upload-alt upload-icon"></i>
                <span class="upload-text">Choose an image</span>
                <input type="file" class="upload-input" accept="image/*" />
              </label>
            </div>
          </div>

          <!-- Name Input -->
          <div class="form-group">
            <label class="form-label">Your Name</label>
            <input
              type="text"
              class="form-input"
              placeholder="Enter your full name"
            />
          </div>

          <!-- Feedback Textarea -->
          <div class="form-group">
            <label class="form-label">Your Feedback</label>
            <textarea
              class="form-textarea"
              rows="4"
              placeholder="Write your valuable feedback..."
            ></textarea>
          </div>

          <!-- Role Select -->
          <div class="form-group">
            <label class="form-label">Your Role</label>
            <select class="form-select">
              <option value="student">Student</option>
              <option value="professional">Professional</option>
              <option value="other">Other</option>
            </select>
          </div>

          <!-- Rating Section -->
          <div class="form-group">
            <label class="form-label">Rate Us</label>
            <div class="rating-container">
              <span class="rating-star" data-value="1">&#9733;</span>
              <span class="rating-star" data-value="2">&#9733;</span>
              <span class="rating-star" data-value="3">&#9733;</span>
              <span class="rating-star" data-value="4">&#9733;</span>
              <span class="rating-star" data-value="5">&#9733;</span>
            </div>
          </div>

          <!-- Submit Button -->
          <button type="submit" class="submit-button">
            Submit Testimonial
          </button>
        </form>
      </div>
    </div>

    <div id="footer"></div>
    <script src="../index.js" defer></script>
<script>
  document.getElementById('testimonialForm').addEventListener('submit', async function (e) {
    e.preventDefault();

    const form = e.target;
    const formData = new FormData();
    const imageInput = form.querySelector('.upload-input');
    const nameInput = form.querySelector('.form-input');
    const feedbackInput = form.querySelector('.form-textarea');
    const roleSelect = form.querySelector('.form-select');
    const ratingStars = document.querySelectorAll('.rating-star');

    let rating = 0;
    ratingStars.forEach(star => {
      if (star.classList.contains('selected')) {
        rating = parseInt(star.getAttribute('data-value'));
      }
    });

    formData.append('image', imageInput.files[0]);
    formData.append('name', nameInput.value);
    formData.append('feedback', feedbackInput.value);
    formData.append('role', roleSelect.value);
    formData.append('rating', rating);

    try {
      const res = await fetch('https://defenceguru.onrender.com/api/testimonials', {
        method: 'POST',
        body: formData,
      });

      const data = await res.json();
      alert(data.message || 'Submitted!');

      // Generate local preview image URL
      const imageURL = URL.createObjectURL(imageInput.files[0]);

      // Exact card format based on your screenshot
      const cardHTML = `
        <div class="testimonial-card">
          <div class="profile-section" style="display: flex; align-items: center; margin-bottom: 10px;">
            <div class="profile-image" style="margin-right: 15px;">
              <img src="${imageURL}" alt="${nameInput.value}" style="width: 70px; height: 70px; object-fit: cover; border-radius: 50%; border: 4px solid orange;" />
            </div>
            <div class="profile-info">
              <h3 class="profile-name" style="font-weight: bold; font-size: 1.1rem;">${nameInput.value}</h3>
            </div>
          </div>
          <p class="testimonial-text" style="border-left: 4px solid orange; padding-left: 10px;">
            ${feedbackInput.value}
          </p>
        </div>
      `;

      const container = document.querySelector('.testimonial-container');
      container.insertAdjacentHTML('beforeend', cardHTML);

      // Reset form and rating stars
      form.reset();
      ratingStars.forEach(s => s.classList.remove('selected'));

    } catch (err) {
      console.error('Submission failed', err);
      alert("Failed to submit testimonial. Please try again.");
    }
  });

  // Star rating selection logic
  const stars = document.querySelectorAll('.rating-star');
  stars.forEach(star => {
    star.addEventListener('click', () => {
      const val = parseInt(star.getAttribute('data-value'));
      stars.forEach(s => s.classList.remove('selected'));
      for (let i = 0; i < val; i++) {
        stars[i].classList.add('selected');
      } 
    });
  });

  // Load testimonials from server and display them
  window.addEventListener('DOMContentLoaded', async () => {
  try {
    const res = await fetch('https://defenceguru.onrender.com/api/testimonials');
    const testimonials = await res.json();

    testimonials.forEach(t => {
      // Ensure backend stores only the filename (not full path)
      // Then this will correctly load image from /uploads/<filename>
      const imageURL = t.image
        ? `https://defenceguru.onrender.com/${t.image}` // served by express.static('uploads')
        : '../Assests/default-profile.png'; // fallback if no image

      const cardHTML = `
        <div class="testimonial-card">
          <div class="quote-icon">
            <i class="fas fa-quote-right"></i>
          </div>
          <div class="profile-section">
            <div class="profile-image">
              <img src="${imageURL}" alt="${t.name}" />
            </div>
            <div class="profile-info">
              <h3 class="profile-name">${t.name}</h3>
              <div class="rating">
                ${[...Array(5)].map((_, i) => `
                  <i class="fas fa-star ${i < t.rating ? 'filled' : ''}"></i>
                `).join('')}
              </div>
            </div>
          </div>
          <p class="testimonial-text">
            "${t.feedback}"
          </p>
        </div>
      `;

      document.querySelector('.testimonial-container').insertAdjacentHTML('beforeend', cardHTML);
    });
  } catch (err) {
    console.error('Failed to load testimonials:', err);
  }
});

</script>
    
    
  </body>
</html>
